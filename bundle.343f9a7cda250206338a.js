!function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var r={};n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:e})},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,r){"use strict";var e=r(1),i=function(t){return t&&t.__esModule?t:{default:t}}(e),u=document.querySelector("#app"),o=document.createElement("canvas");o.width=800,o.height=450,u.appendChild(o),(0,i.default)(o)},function(t,n,r){"use strict";function e(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)}function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.ScreenToWorld=n.Vector=n.Point=void 0;var u=function(){function t(t,n){var r=[],e=!0,i=!1,u=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done)&&(r.push(o.value),!n||r.length!==n);e=!0);}catch(t){i=!0,u=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw u}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}(),a=r(2),c=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(t){return[t.x,t.y,t.z]},f=function(t){return Math.sqrt(t.reduce(function(t,n){return t+Math.pow(n,2)},0))},h=function(t){var n=f(t);if(0===n)throw new Error("can't normalize 0 vector");return t.map(function(t){return t/n})},s=function(t,n){if(t.length!=n.length)throw new Error("cannot add array, dimension mismatch: "+t.length+" and "+n.length);return t.map(function(t,r){return t+n[r]})},d=function(t,n){if(t.length!=n.length)throw new Error("cannot subtract arrays, dimension mismatch: "+t.length+" and "+n.length);return t.map(function(t,r){return t-n[r]})},m=function(t,n){return t.map(function(t){return t*n})},y=function(t,n){if(t.length!=n.length)throw new Error("cannot take dot product, dimension mismatch: "+t.length+" and "+n.length);return t.map(function(t,r){return t*n[r]}).reduce(function(t,n){return t+n},0)},g=function(t,n,r){return Math.min(Math.max(t,n),r)},p=function(){function t(n,r,e){var u=this;i(this,t),this.asArray=function(){return[u.red,u.green,u.blue]},this.red=g(n,0,255),this.green=g(r,0,255),this.blue=g(e,0,255)}return o(t,[{key:"toRgbString",value:function(){return"rgb("+this.red+","+this.green+","+this.blue+")"}}],[{key:"make",value:function(t,n,r){return new this(t,n,r)}}]),t}(),v=function(){function t(n){var r=this;i(this,t),this.getColor=function(t,n,i){var u=i.subtract(t).normalize().dotProduct(n);return p.make.apply(p,e(m(r.color.asArray(),u).map(function(t){return Math.round(t)})))},this.color=n}return o(t,null,[{key:"make",value:function(t){return new this(t)}}]),t}(),w=function(){function t(n,r,u){var o=this;i(this,t),this.addVector=function(n){return t.make.apply(t,e(s(l(o),l(n))))},this.subtract=function(t){return b.make.apply(b,e(d(l(o),l(t))))},this.toArray=function(){return l(o)},this.x=n,this.y=r,this.z=u}return o(t,null,[{key:"make",value:function(t,n,r){return new this(t,n,r)}}]),t}(),k=function(t,n,r,e){return t*e-n*r},b=function(){function t(n,r,u){var o=this;i(this,t),this.magnitude=function(){return f(l(o))},this.normalize=function(){var t;return(t=o.constructor).make.apply(t,e(h(l(o))))},this.multiplyScalar=function(n){return t.make.apply(t,e(m(l(o),n)))},this.dotProduct=function(t){return y(l(o),l(t))},this.crossProduct=function(n){return t.make(k(o.y,o.z,n.y,n.z),-k(o.x,o.z,n.x,n.z),k(o.x,o.y,n.x,n.y))},this.toArray=function(){return l(o)},this.x=n,this.y=r,this.z=u}return o(t,null,[{key:"make",value:function(t,n,r){return new this(t,n,r)}}]),t}(),x=function(){function t(n,r){i(this,t),this.origin=n,this.direction=r.subtract(n).normalize()}return o(t,null,[{key:"make",value:function(t,n){return new this(t,n)}}]),t}(),M=function(){function t(n,r,u){var o=this;i(this,t),this.intersect=function(t){var n=t.origin.subtract(o.origin),r=t.direction.dotProduct(t.direction),i=t.direction.multiplyScalar(2).dotProduct(n),u=n.dotProduct(n)-Math.pow(o.radius,2),a=(0,c.default)(r,i,u);if(0===a.length)return null;var l=Math.min.apply(Math,e(a));return t.origin.addVector(t.direction.multiplyScalar(l))},this.normalVector=function(t){return t.subtract(o.origin).normalize()},this.origin=n,this.radius=r,this.material=u}return o(t,null,[{key:"make",value:function(t,n,r){return new this(t,n,r)}}]),t}(),P=function t(n,r,e){var u=this;i(this,t),this.getPoint=function(t,n){var r=t/(u.screenMaxWidth-1),e=n/(u.screenMaxHeight-1),i=r*u.worldMaxWidth-u.worldMaxWidth/2,o=u.worldMaxHeight/2-e*u.worldMaxHeight;return w.make(i,0,o)},this.screenMaxWidth=n,this.screenMaxHeight=r,this.worldMaxWidth=e;var o=e/n;this.worldMaxHeight=o*r},z=function(t,n){for(var r=0;r<t.length;r++){var e=t[r],i=n(e);if(i)return[e,i]}return[null,null]},S=function(t){for(var n=t.width,r=t.height,e=t.getContext("2d"),i=w.make(0,-10,0),o=M.make(w.make(0,0,0),2,v.make(p.make(50,100,150))),a=M.make(w.make(3,5,0),2,v.make(p.make(150,100,50))),c=[o,a],l=new P(n,r,10),f=0;f<n;f++)for(var h=0;h<r;h++)!function(t){var n=x.make(i,l.getPoint(f,t)),r=z(c,function(t){return t.intersect(n)}),o=u(r,2),a=o[0],h=o[1];if(a&&h){var s=a.normalVector(h),d=n.origin,m=a.material.getColor(h,s,d);e.fillStyle=m.toRgbString(),e.fillRect(f,t,1,1)}}(h)};n.default=S,n.Point=w,n.Vector=b,n.ScreenToWorld=P},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(t,n,r){return Math.pow(n,2)-4*t*r},i=function(t,n,r){var i=e(t,n,r);if(i<0)return[];if(0===i)return[-n/(2*t)];var u=Math.sqrt(i);return[(-n+u)/(2*t),(-n-u)/(2*t)]};n.default=i}]);